(function(e){function t(t){for(var o,c,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},r=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"2a56":function(e,t,n){e.exports=n.p+"img/pinto.abe80838.jpg"},"330d":function(e,t,n){"use strict";n("8b81")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container"},[n("router-view")],1),n("footer",{staticClass:"footer"},[n("div",{staticClass:"content has-text-centered"},[n("p",[n("strong",[e._v("App para el control de conejos ")]),n("b-icon",{attrs:{icon:"code-tags"}}),e._v(" con "),n("b-icon",{attrs:{icon:"heart",type:"is-danger"}}),e._v(" por "),n("a",{attrs:{href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")])],1)])])])},r=[],c={name:"app"},i=c,s=(n("034f"),n("2877")),l=Object(s["a"])(i,a,r,!1,null,null,null),u=l.exports,d=(n("5363"),n("289d")),f=(n("5abe"),n("4de4"),n("d3b7"),n("99af"),new Intl.DateTimeFormat("es-MX",{dateStyle:"medium"})),p=new Intl.NumberFormat("en",{style:"currency",currency:"MXN"}),m=864e5,b=365*m,h=b/12;o["a"].filter("dinero",(function(e){return p.format(e)})),o["a"].filter("timestampAFecha",(function(e){return e?f.format(new Date(e)):""})),o["a"].filter("diferenciaAEdad",(function(e){if(!e)return"";var t="",n=Math.floor(e/b);e-=n*b;var o=Math.floor(e/h);e-=o*h;var a=Math.floor(e/m);return n>0&&(t+="".concat(n," año").concat(n>1?"s":""," ")),o>0&&(t+="".concat(o," mes").concat(o>1?"es":""," ")),a>0&&(t+="".concat(a," día").concat(a>1?"s":"")),t})),o["a"].filter("edad",(function(e){if(!e)return"";var t="",n=new Date(e),o=new Date,a=o-n,r=Math.floor(a/b);a-=r*b;var c=Math.floor(a/h);a-=c*h;var i=Math.floor(a/m);return r>0&&(t+="".concat(r," año").concat(r>1?"s":""," ")),c>0&&(t+="".concat(c," mes").concat(c>1?"es":""," ")),i>0&&(t+="".concat(i," día").concat(i>1?"s":"")),t}));n("b0c0");var v=n("8c4f"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-tabs",{attrs:{type:"is-boxed",position:"is-centered"},model:{value:e.tabActiva,callback:function(t){e.tabActiva=t},expression:"tabActiva"}},[n("b-tab-item",{attrs:{icon:"plus",label:""}},[n("agregar-conejo")],1),n("b-tab-item",{attrs:{icon:"rabbit",label:""}},[n("conejos")],1),n("b-tab-item",{attrs:{icon:"cash",label:""}},[n("ventas")],1),n("b-tab-item",{attrs:{icon:"information"}},[n("acerca-de")],1),n("b-tab-item",{attrs:{icon:"logout"}},[n("section",{staticClass:"section"},[n("h3",{staticClass:"is-size-3"},[e._v("Cerrando sesión...")]),n("b-loading",{attrs:{"is-full-page":!1,active:!0}})],1)])],1)},j=[],w=n("1da1"),C=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:"Padre"}},[n("select-conejos",{attrs:{genero:"M",conejoSeleccionado:e.conejo.padre},on:{"update:conejoSeleccionado":function(t){return e.$set(e.conejo,"padre",t)},"update:conejo-seleccionado":function(t){return e.$set(e.conejo,"padre",t)}}})],1),n("b-field",{attrs:{label:"Madre"}},[n("select-conejos",{attrs:{genero:"H",conejoSeleccionado:e.conejo.madre},on:{"update:conejoSeleccionado":function(t){return e.$set(e.conejo,"madre",t)},"update:conejo-seleccionado":function(t){return e.$set(e.conejo,"madre",t)}}})],1),n("b-field",{attrs:{label:"Identificador"}},[n("b-input",{attrs:{placeholder:"Identificador"},model:{value:e.conejo.identificador,callback:function(t){e.$set(e.conejo,"identificador",t)},expression:"conejo.identificador"}})],1),n("b-field",{attrs:{label:"Género"}},[n("b-radio",{attrs:{name:"name","native-value":"M"},model:{value:e.conejo.genero,callback:function(t){e.$set(e.conejo,"genero",t)},expression:"conejo.genero"}},[e._v(" Macho ")]),n("b-radio",{attrs:{name:"name","native-value":"H"},model:{value:e.conejo.genero,callback:function(t){e.$set(e.conejo,"genero",t)},expression:"conejo.genero"}},[e._v(" Hembra ")])],1),n("b-field",{attrs:{label:"Fecha de nacimiento"}},[n("b-datepicker",{attrs:{locale:"es-MX",placeholder:"Clic para seleccionar...",icon:"calendar-today","trap-focus":"","icon-right":e.conejo.fechaNacimiento?"close-circle":"","icon-right-clickable":""},on:{"icon-right-click":function(t){e.conejo.fechaNacimiento=null}},model:{value:e.conejo.fechaNacimiento,callback:function(t){e.$set(e.conejo,"fechaNacimiento",t)},expression:"conejo.fechaNacimiento"}})],1),n("b-field",[n("b-upload",{attrs:{multiple:"","drag-drop":"",expanded:""},model:{value:e.conejo.fotos,callback:function(t){e.$set(e.conejo,"fotos",t)},expression:"conejo.fotos"}},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-centered"},[n("p",[n("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),n("p",[e._v("Clic aquí para buscar las fotos")])])])])],1),n("div",{staticClass:"tags"},e._l(e.conejo.fotos,(function(t,o){return n("span",{key:o,staticClass:"tag is-primary"},[e._v(" "+e._s(t.name)+" ")])})),0),n("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:function(t){return e.guardar()}}},[e._v("Guardar")])],1)])}),x=[],_=n("b85c"),y=n("e71f"),k=(n("25f0"),n("260b")),O=n("588e"),S=n("aced"),F=!0,R={obtener:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){var t,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={apiKey:"AIzaSyCAW6xWHVFlvCleBg-Nmqn6ghT20YzSMRk",authDomain:"cunicultura-app.firebaseapp.com",databaseURL:"",projectId:"cunicultura-app",storageBucket:"cunicultura-app.appspot.com",messagingSenderId:"23487870452",appId:"1:23487870452:web:3b25575b0c9a7afb65f5a1"},n=Object(k["a"])(t),o=Object(y["g"])(n),e.next=5;break;case 5:if(!F){e.next=7;break}return e.abrupt("return",o);case 7:return e.prev=7,e.next=10,Object(y["e"])(o);case 10:S["a"].open({message:"Modo fuera de línea habilitado correctamente",type:"is-success"}),F=!0,e.next=21;break;case 14:e.prev=14,e.t0=e["catch"](7),console.log({err:e.t0}),a="","failed-precondition"==e.t0.code?a="Error: recuerda no tener varias pestañas abiertas con la app":"unimplemented"==e.t0.code&&(a="Error: el navegador que usas no soporta el modo fuera de línea. Cambia de navegador"),a+=" "+e.t0.toString(),S["a"].open({message:a,type:"is-danger"});case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,null,[[7,14]])})));function t(){return e.apply(this,arguments)}return t}(),obtenerStorage:function(){return Object(O["c"])()},obtenerColeccionConejos:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=y["b"],e.next=3,R.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"conejos"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),obtenerColeccionVentas:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=y["b"],e.next=3,R.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"ventas"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),obtenerColeccionApareamientos:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=y["b"],e.next=3,R.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"apareamientos"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},$=R,E=(n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),{comprimirImagen:function(e,t){return new Promise((function(n,o){var a=document.createElement("canvas"),r=new Image;r.onload=function(){a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0),a.toBlob((function(e){if(null===e)return o(e);n(e)}),"image/jpeg",t/100)},r.src=URL.createObjectURL(e)}))}}),I=E,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-select",{attrs:{loading:e.cargando,placeholder:e.placeholder()},on:{input:e.onCambiado},model:{value:e.conejoSeleccionadoInterno,callback:function(t){e.conejoSeleccionadoInterno=t},expression:"conejoSeleccionadoInterno"}},e._l(e.conejos,(function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(t.identificador)+" ")])})),0)},N=[],P=(n("c740"),n("159b"),n("a434"),n("2909")),A={actualizarConejo:function(e,t){return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=y["j"],n.t1=y["d"],n.next=4,$.obtener();case 4:return n.t2=n.sent,n.t3=e,n.t4=(0,n.t1)(n.t2,"conejos",n.t3),n.t5=t,n.next=10,(0,n.t0)(n.t4,n.t5);case 10:case"end":return n.stop()}}),n)})))()},obtenerReferenciaParaFoto:function(e,t){return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(O["d"])(Object(O["c"])(),"conejos/"+e+"/"+t));case 1:case"end":return n.stop()}}),n)})))()},obtenerConejoPorId:function(e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=y["f"],t.t1=y["d"],t.next=4,$.obtener();case 4:return t.t2=t.sent,t.t3=e,t.t4=(0,t.t1)(t.t2,"conejos",t.t3),t.next=9,(0,t.t0)(t.t4);case 9:return n=t.sent,t.abrupt("return",new Promise((function(e,t){if(n.exists()){var o=n.data();o.id=n.id,e(o)}else t("No existe conejo con ese ID")})));case 11:case"end":return t.stop()}}),t)})))()},obtenerConejosConGenero:function(e,t){return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",A.obtenerConejosUsandoConsultas([Object(y["k"])("genero","==",e),Object(y["k"])("fechaFallecimiento","==",null),Object(y["k"])("vendido","==",!1)],t));case 1:case"end":return n.stop()}}),n)})))()},obtenerConejosUsandoConsultas:function(e,t){return Object(w["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,$.obtenerColeccionConejos();case 2:o=n.sent,a=y["i"].apply(void 0,[o].concat(Object(P["a"])(e))),Object(y["h"])(a,t);case 5:case"end":return n.stop()}}),n)})))()}},D=A,z={props:["conejoSeleccionado","genero","idForzarSeleccion"],data:function(){return{cargando:!1,conejos:[],conejoSeleccionadoInterno:{}}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.obtenerConejosYEscucharCambios();case 2:case"end":return t.stop()}}),t)})))()},watch:{idForzarSeleccion:function(){this.idForzarSeleccion&&this.seleccionarConejoConId(this.idForzarSeleccion)}},methods:{placeholder:function(){return"M"===this.genero?"Seleccione un conejo":"Selecciona una coneja"},onCambiado:function(e){this.$emit("update:conejoSeleccionado",e)},seleccionarConejoConId:function(e){var t=this.conejos.findIndex((function(t){return t.id===e}));-1!==t&&(this.conejoSeleccionadoInterno=this.conejos[t])},indiceDeConejo:function(e){return this.conejos.findIndex((function(t){return t.id===e}))},obtenerConejosYEscucharCambios:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.cargando=!0,D.obtenerConejosConGenero(e.genero,(function(t){t.docChanges().forEach((function(t){var n=t.doc.data(),o=t.doc.id;if("added"===t.type&&(n.id=o,e.conejos.push(n)),"modified"===t.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,n)}if("removed"===t.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.seleccionarConejoConId(e.idForzarSeleccion),e.cargando=!1}));case 2:case"end":return t.stop()}}),t)})))()}}},H=z,T=Object(s["a"])(H,M,N,!1,null,null,null),V=T.exports,Y={components:{SelectConejos:V},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.next=3,$.obtenerColeccionConejos();case 3:e.coleccionConejos=t.sent,e.cargando=!1;case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{conejo:{padre:null,madre:null,identificador:"",fechaNacimiento:null,fotos:[],genero:"M"},cargando:!1,coleccionConejos:null}},methods:{guardar:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n,o,a,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.conejo.identificador){t.next=2;break}return t.abrupt("return");case 2:if(e.cargando=!0,n=Object.assign({},e.conejo),Object.assign(n,e.conejo),o=n.fotos,n.fotos=[],n.fechaFallecimiento=null,n.vendido=!1,n.fechaNacimiento&&(n.fechaNacimiento.setHours(0,0,0,0),n.fechaNacimiento=n.fechaNacimiento.getTime()),n.padre?n.padre={id:n.padre.id,identificador:n.padre.identificador}:n.padre={},n.madre?n.madre={id:n.madre.id,identificador:n.madre.identificador}:n.madre={},!(o.length>0)){t.next=39;break}a=Object(_["a"])(o),t.prev=14,a.s();case 16:if((r=a.n()).done){t.next=31;break}return c=r.value,n.fotos.push(c.name),t.next=21,D.obtenerReferenciaParaFoto(n.identificador,c.name);case 21:return i=t.sent,t.t0=O["e"],t.t1=i,t.next=26,I.comprimirImagen(c,20);case 26:return t.t2=t.sent,t.next=29,(0,t.t0)(t.t1,t.t2);case 29:t.next=16;break;case 31:t.next=36;break;case 33:t.prev=33,t.t3=t["catch"](14),a.e(t.t3);case 36:return t.prev=36,a.f(),t.finish(36);case 39:Object(y["a"])(e.coleccionConejos,n),e.cargando=!1,e.$buefy.toast.open("Registro correcto"),e.conejo.identificador="",e.conejo.fechaNacimiento=null,e.conejo.fotos=[];case 45:case"end":return t.stop()}}),t,null,[[14,33,36,39]])})))()}}},G=Y,q=Object(s["a"])(G,C,x,!1,null,null,null),L=q.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("b-button",{attrs:{"icon-right":"filter-variant",type:"is-info"},on:{click:function(t){e.mostrarFiltros=!e.mostrarFiltros}}},[e._v("Filtrar")]),e._v("   "),n("b-taglist",{staticStyle:{display:"inline"},attrs:{attached:""}},[n("b-tag",{staticClass:"color-conejo",attrs:{size:"is-medium"}},[n("b-icon",{attrs:{icon:"gender-male"}}),e._v(" "+e._s(e.totalMachos()))],1),n("b-tag",{staticClass:"color-coneja",attrs:{size:"is-medium"}},[n("b-icon",{attrs:{icon:"gender-female"}}),e._v(" "+e._s(e.totalHembras()))],1),n("b-tag",{attrs:{size:"is-medium",type:"is-warning"}},[n("b-icon",{attrs:{icon:"sigma"}}),e._v(" "+e._s(e.totalMachos()+e.totalHembras()))],1)],1)],1)])]),n("div",{staticClass:"columns"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.mostrarFiltros,expression:"mostrarFiltros"}],staticClass:"column"},[n("b-field",{attrs:{label:"Estado"}},[n("b-select",{attrs:{loading:e.cargando,expanded:"",icon:"coffin"},nativeOn:{change:function(t){return e.obtenerConejosYEscucharCambios()}},model:{value:e.filtrosSeleccionados.fallecidos,callback:function(t){e.$set(e.filtrosSeleccionados,"fallecidos",t)},expression:"filtrosSeleccionados.fallecidos"}},e._l(e.filtros.fallecidos,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)],1),n("b-field",[n("b-select",{attrs:{loading:e.cargando,expanded:"",icon:"cash"},nativeOn:{change:function(t){return e.obtenerConejosYEscucharCambios()}},model:{value:e.filtrosSeleccionados.vendidos,callback:function(t){e.$set(e.filtrosSeleccionados,"vendidos",t)},expression:"filtrosSeleccionados.vendidos"}},e._l(e.filtros.vendidos,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)],1),n("b-field",{attrs:{label:"Género"}},[n("b-select",{attrs:{loading:e.cargando,expanded:"",icon:"gender-male"},nativeOn:{change:function(t){return e.obtenerConejosYEscucharCambios()}},model:{value:e.filtrosSeleccionados.genero,callback:function(t){e.$set(e.filtrosSeleccionados,"genero",t)},expression:"filtrosSeleccionados.genero"}},e._l(e.filtros.generos,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)],1)],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-table",{attrs:{data:e.conejos,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[n("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0}])},[n("b-table-column",{attrs:{field:"identificador",label:"Identificador"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.identificador)+" ")]}}])}),n("b-table-column",{attrs:{field:"genero",label:"Género"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("b-icon",{directives:[{name:"show",rawName:"v-show",value:"H"===e.row.genero,expression:"props.row.genero === 'H'"}],staticClass:"icono-coneja",attrs:{icon:"gender-female"}}),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:"M"===e.row.genero,expression:"props.row.genero === 'M'"}],staticClass:"icono-conejo",attrs:{icon:"gender-male"}})]}}])}),n("b-table-column",{attrs:{field:"padre",label:"Padres"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-tag",{directives:[{name:"show",rawName:"v-show",value:t.row.madre.identificador,expression:"props.row.madre.identificador"}],staticClass:"color-coneja",attrs:{size:"is-medium"}},[e._v(e._s(t.row.madre.identificador))]),e._v("   "),n("b-tag",{directives:[{name:"show",rawName:"v-show",value:t.row.padre.identificador,expression:"props.row.padre.identificador"}],staticClass:"color-conejo",attrs:{size:"is-medium"}},[e._v(e._s(t.row.padre.identificador))])]}}])}),n("b-table-column",{attrs:{field:"fotos"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("fotos-de-conejo",{attrs:{conejo:e.row}})]}}])}),n("b-table-column",{attrs:{label:"Edad"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timestampAFecha")(t.row.fechaNacimiento))+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.row.fechaFallecimiento,expression:"props.row.fechaFallecimiento"}]},[e._v(" - "+e._s(e._f("timestampAFecha")(t.row.fechaFallecimiento))+" "),n("b-icon",{attrs:{icon:"coffin"}})],1),t.row.fechaFallecimiento?n("span",[e._v("("+e._s(e._f("diferenciaAEdad")(t.row.fechaFallecimiento-t.row.fechaNacimiento))+")")]):n("span",[e._v(" ("+e._s(e._f("edad")(t.row.fechaNacimiento))+") ")])]}}])}),n("b-table-column",{attrs:{field:"id",label:"Opciones"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.fechaFallecimiento&&!t.row.vendido,expression:"!props.row.fechaFallecimiento && !props.row.vendido"}],attrs:{type:"is-info"},on:{click:function(n){return e.editar(t.row)}}},[n("b-icon",{attrs:{icon:"pencil"}})],1),e._v("   "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.fechaFallecimiento&&!t.row.vendido&&"H"===t.row.genero,expression:"\n              !props.row.fechaFallecimiento &&\n              !props.row.vendido &&\n              props.row.genero === 'H'\n            "}],attrs:{type:"is-danger",outlined:""},on:{click:function(n){return e.apareamientos(t.row)}}},[n("b-icon",{attrs:{icon:"heart"}})],1),e._v("   "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.fechaFallecimiento&&!t.row.vendido,expression:"!props.row.fechaFallecimiento && !props.row.vendido"}],attrs:{type:"is-success"},on:{click:function(n){return e.marcarVendido(t.row)}}},[n("b-icon",{attrs:{icon:"cash"}})],1),e._v("   "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.fechaFallecimiento&&!t.row.vendido,expression:"!props.row.fechaFallecimiento && !props.row.vendido"}],attrs:{type:"is-warning"},on:{click:function(n){return e.marcarFallecido(t.row)}}},[n("b-icon",{attrs:{icon:"coffin"}})],1),e._v("   "),n("b-button",{attrs:{type:"is-danger"},on:{click:function(n){return e.eliminar(t.row)}}},[n("b-icon",{attrs:{icon:"delete"}})],1),e._v("   "),n("b-tag",{directives:[{name:"show",rawName:"v-show",value:t.row.vendido,expression:"props.row.vendido"}],attrs:{type:"is-success"}},[e._v(" Vendido ")])]}}])})],1)],1)])])},X=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-carousel",{directives:[{name:"show",rawName:"v-show",value:e.conejo.fotos&&e.conejo.fotos.length>0,expression:"conejo.fotos && conejo.fotos.length > 0"}],staticStyle:{"max-width":"400px"},attrs:{"pause-info":!1}},e._l(e.conejo.fotos,(function(t,o){return n("b-carousel-item",{key:e.conejo.identificador+o,nativeOn:{click:function(e){e.stopPropagation()}}},[n("foto-de-conejo",{attrs:{conejo:e.conejo,foto:t}})],1)})),1)},J=[],W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!0},model:{value:e.cargando,callback:function(t){e.cargando=t},expression:"cargando"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:e.url,expression:"url"}],attrs:{src:e.url,alt:""},on:{click:e.ampliarImagen}}),n("b-modal",{on:{"after-leave":e.onModalCerrado},model:{value:e.mostrarModal,callback:function(t){e.mostrarModal=t},expression:"mostrarModal"}},[n("p",{staticClass:"image"},[n("img",{attrs:{src:e.url}})])])],1)},K=[],Q={props:["conejo","foto"],data:function(){return{url:"",mostrarModal:!1,click:!1,cargando:!1}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.next=3,Object(O["b"])(Object(O["d"])(Object(O["c"])(),"conejos/".concat(e.conejo.identificador,"/").concat(e.foto)));case 3:e.url=t.sent,e.cargando=!1;case 5:case"end":return t.stop()}}),t)})))()},methods:{onModalCerrado:function(){this.click=!1},ampliarImagen:function(){this.click||(this.mostrarModal=!0,this.click=!0)}}},Z=Q,ee=Object(s["a"])(Z,W,K,!1,null,null,null),te=ee.exports,ne={components:{FotoDeConejo:te},props:["conejo"]},oe=ne,ae=Object(s["a"])(oe,B,J,!1,null,null,null),re=ae.exports,ce="Fallecidos",ie="Vivos",se="Todos",le="Vendidos",ue="No vendidos",de="Todos",fe="Todos",pe="H",me="M",be={components:{FotosDeConejo:re},data:function(){return{mostrarFiltros:!1,filtrosSeleccionados:{fallecidos:ie,vendidos:ue,genero:fe},filtros:{fallecidos:[ce,ie,se],vendidos:[le,ue,de],generos:[me,pe,fe]},conejos:[],cargando:!1,bd:null}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.obtener();case 2:return e.bd=t.sent,t.next=5,e.obtenerConejosYEscucharCambios();case 5:case"end":return t.stop()}}),t)})))()},methods:{editar:function(e){this.$router.push({name:"EditarConejo",params:{id:e.id}})},totalMachos:function(){var e,t=0,n=Object(_["a"])(this.conejos);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.genero===me&&t++}}catch(a){n.e(a)}finally{n.f()}return t},totalHembras:function(){var e,t=0,n=Object(_["a"])(this.conejos);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.genero===pe&&t++}}catch(a){n.e(a)}finally{n.f()}return t},apareamientos:function(e){this.$router.push({name:"Apareamientos",params:{id:e.id}})},marcarFallecido:function(e){var t=this;this.$buefy.dialog.confirm({message:"¿Marcar como fallecido? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, marcar",onConfirm:function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.fechaFallecimiento=(new Date).setHours(0,0,0,0),Object(y["j"])(Object(y["d"])(t.bd,"conejos",e.id),e);case 2:case"end":return n.stop()}}),n)})));function o(){return n.apply(this,arguments)}return o}()})},marcarVendido:function(e){var t=this;this.$buefy.dialog.prompt({message:"Ingresa la cantidad: ",inputAttrs:{type:"number",placeholder:"Escribe la cantidad",min:1},trapFocus:!0,onConfirm:function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=parseFloat(o),e.vendido=!0,n.t0=y["a"],n.next=5,$.obtenerColeccionVentas();case 5:n.t1=n.sent,n.t2={monto:o,idConejo:e.id,fecha:(new Date).getTime()},(0,n.t0)(n.t1,n.t2),Object(y["j"])(Object(y["d"])(t.bd,"conejos",e.id),e),t.$buefy.toast.open("Vendido");case 10:case"end":return n.stop()}}),n)})));function o(e){return n.apply(this,arguments)}return o}()})},eliminar:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$buefy.dialog.confirm({message:"¿Eliminar conejo? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, eliminar",onConfirm:function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(){var o,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.cargando=!0,o=Object(_["a"])(e.fotos),n.prev=2,o.s();case 4:if((a=o.n()).done){n.next=14;break}return r=a.value,n.t0=O["a"],n.next=9,D.obtenerReferenciaParaFoto(e.identificador,r);case 9:return n.t1=n.sent,n.next=12,(0,n.t0)(n.t1);case 12:n.next=4;break;case 14:n.next=19;break;case 16:n.prev=16,n.t2=n["catch"](2),o.e(n.t2);case 19:return n.prev=19,o.f(),n.finish(19);case 22:return n.t3=y["c"],n.t4=y["d"],n.next=26,$.obtener();case 26:return n.t5=n.sent,n.t6=e.id,n.t7=(0,n.t4)(n.t5,"conejos",n.t6),n.next=31,(0,n.t3)(n.t7);case 31:t.cargando=!1,t.$buefy.toast.open("Eliminado");case 33:case"end":return n.stop()}}),n,null,[[2,16,19,22]])})));function o(){return n.apply(this,arguments)}return o}()});case 1:case"end":return n.stop()}}),n)})))()},obtenerConejosYEscucharCambios:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.conejos=[],n=[],e.filtrosSeleccionados.fallecidos===ie?n.push(Object(y["k"])("fechaFallecimiento","==",null)):e.filtrosSeleccionados.fallecidos===ce&&n.push(Object(y["k"])("fechaFallecimiento","!=",null)),e.filtrosSeleccionados.vendidos===le?n.push(Object(y["k"])("vendido","==",!0)):e.filtrosSeleccionados.vendidos===ue&&n.push(Object(y["k"])("vendido","==",!1)),e.filtrosSeleccionados.genero===pe?n.push(Object(y["k"])("genero","==","H")):e.filtrosSeleccionados.genero===me&&n.push(Object(y["k"])("genero","==","M")),e.cargando=!0,D.obtenerConejosUsandoConsultas(n,(function(t){t.docChanges().forEach((function(t){e.cargando=!0;var n=t.doc.data(),o=t.doc.id;if("added"===t.type&&(n.id=o,e.conejos.push(n)),"modified"===t.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,n)}if("removed"===t.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.cargando=!1}));case 7:case"end":return t.stop()}}),t)})))()},indiceDeConejo:function(e){return this.conejos.findIndex((function(t){return t.id===e}))}}},he=be,ve=(n("330d"),Object(s["a"])(he,U,X,!1,null,"4edc14e6",null)),ge=ve.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"hero is-medium is-info"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[e._v("Acerca de")]),n("img",{staticClass:"image",attrs:{title:"El conejo pinto",src:e.Pinto}}),n("h2",{staticClass:"subtitle"},[e._v("App para cunicultura")]),e._v(" Creado y mantenido con "),n("b-icon",{attrs:{icon:"heart",type:"is-danger"}}),e._v(" por "),n("a",{staticClass:"has-text-warning",attrs:{target:"_blank",href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")]),e._v(" usando "),n("b-icon",{attrs:{icon:"vuejs"}}),e._v(" y "),n("b-icon",{attrs:{icon:"firebase"}}),n("br"),n("a",{staticClass:"has-text-warning",attrs:{target:"_blank",href:"https://parzibyte.me/blog/sigueme/"}},[e._v("Puedes seguirme aquí")]),e._v(" y ver "),n("a",{staticClass:"has-text-warning",attrs:{href:"https://parzibyte.me/blog/software-creado-por-parzibyte/",target:"_blank"}},[e._v("más proyectos aquí")]),n("hr"),n("h4",{staticClass:"is-size-4"},[e._v("Créditos de iconos")]),n("a",{attrs:{href:"https://www.flaticon.com/free-icons/rabbit",title:"rabbit icons"}},[e._v("Rabbit icons created by torskaya - Flaticon")])],1)])])},we=[],Ce=n("2a56"),xe=n.n(Ce),_e={data:function(){return{Pinto:xe.a}}},ye=_e,ke=Object(s["a"])(ye,je,we,!1,null,null,null),Oe=ke.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-table",{attrs:{data:e.ventas,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[n("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0},{key:"footer",fn:function(){return[n("th",[n("div",{staticClass:"th-wrap"},[e._v("Total")])]),n("th",{attrs:{colspan:"2"}},[n("div",{staticClass:"th-wrap"},[e._v(e._s(e._f("dinero")(e.total())))])])]},proxy:!0}])},[n("b-table-column",{attrs:{field:"idConejo",label:"Conejo"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.conejoPorId(t.row.idConejo).identificador)+" ")]}}])}),n("b-table-column",{attrs:{field:"monto",label:"Monto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dinero")(t.row.monto))+" ")]}}])}),n("b-table-column",{attrs:{field:"padre",label:"Fecha"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timestampAFecha")(t.row.fecha))+" ")]}}])})],1)],1)])])},Fe=[],Re={data:function(){return{ventas:[],cargando:!1,conejos:[]}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.obtenerConejosYEscucharCambios();case 2:return t.next=4,e.obtenerVentasYEscucharCambios();case 4:case"end":return t.stop()}}),t)})))()},methods:{total:function(){var e,t=0,n=Object(_["a"])(this.ventas);try{for(n.s();!(e=n.n()).done;){var o=e.value;t+=o.monto}}catch(a){n.e(a)}finally{n.f()}return t},conejoPorId:function(e){var t,n=Object(_["a"])(this.conejos);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.id===e)return o}}catch(a){n.e(a)}finally{n.f()}return{}},obtenerConejosYEscucharCambios:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.cargando=!0,D.obtenerConejosUsandoConsultas([Object(y["k"])("fechaFallecimiento","==",null)],(function(t){t.docChanges().forEach((function(t){e.cargando=!0;var n=t.doc.data(),o=t.doc.id;if("added"===t.type&&(n.id=o,e.conejos.push(n)),"modified"===t.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,n)}if("removed"===t.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.cargando=!1}));case 2:case"end":return t.stop()}}),t)})))()},indiceDeConejo:function(e){return this.conejos.findIndex((function(t){return t.id===e}))},indiceDeVenta:function(e){return this.ventas.findIndex((function(t){return t.id===e}))},obtenerVentasYEscucharCambios:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.t0=y["i"],t.next=4,$.obtenerColeccionVentas();case 4:t.t1=t.sent,n=(0,t.t0)(t.t1),Object(y["h"])(n,(function(t){t.docChanges().forEach((function(t){e.cargando=!0;var n=t.doc.data(),o=t.doc.id;if("added"===t.type&&(n.id=o,e.ventas.push(n)),"modified"===t.type){var a=e.indiceDeVenta(o);-1!==a&&e.$set(e.ventas,a,n)}if("removed"===t.type){var r=e.indiceDeVenta(o);-1!==r&&e.ventas.splice(r,1)}})),e.cargando=!1}));case 7:case"end":return t.stop()}}),t)})))()}}},$e=Re,Ee=Object(s["a"])($e,Se,Fe,!1,null,null,null),Ie=Ee.exports,Me=n("6a7c"),Ne={components:{AgregarConejo:L,Conejos:ge,AcercaDe:Oe,Ventas:Ie},data:function(){return{tabActiva:1}},watch:{tabActiva:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(4!==e.tabActiva){t.next=10;break}return t.prev=1,t.next=4,Object(Me["d"])(Object(Me["a"])());case 4:e.$buefy.toast.open("Hasta pronto"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$buefy.toast.open("Error cerrando sesión: "+t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},Pe=Ne,Ae=Object(s["a"])(Pe,g,j,!1,null,null,null),De=Ae.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("div",{staticClass:"columns"},[n("b-modal",{attrs:{active:e.mostrarModalFecha,"has-modal-card":"","trap-focus":""},on:{"update:active":function(t){e.mostrarModalFecha=t}}},[n("seleccionador-fecha",{on:{seleccionada:e.onFechaSeleccionada}})],1),n("div",{staticClass:"column"},[n("b-button",{attrs:{loading:e.cargando,type:"is-info","icon-left":"arrow-left"},on:{click:e.volver}},[e._v("Volver ")]),e._v("   "),n("b-button",{attrs:{loading:e.cargando,type:"is-success","icon-left":"plus"},on:{click:e.agregar}},[e._v("Agregar ")]),n("br"),n("br"),n("b-notification",{attrs:{type:"is-success",closable:!1}},[n("strong",[e._v("Coneja: ")]),e._v(" "+e._s(e.coneja.identificador)+" ")]),n("b-table",{attrs:{data:e.apareamientos,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[n("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0}])},[n("b-table-column",{attrs:{field:"padre",label:"Padre"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.conejoPorId(t.row.padre).identificador)+" ")]}}])}),n("b-table-column",{attrs:{label:"Inicio"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timestampAFecha")(t.row.fechaInicio))+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.fechaFin,expression:"!props.row.fechaFin"}]},[e._v("("+e._s(e._f("edad")(t.row.fechaInicio))+")")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.row.fechaFin,expression:"props.row.fechaFin"}]},[e._v("("+e._s(e._f("diferenciaAEdad")(t.row.fechaFin-t.row.fechaInicio))+")")])]}}])}),n("b-table-column",{attrs:{field:"fechaFin",label:"Fin"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timestampAFecha")(t.row.fechaFin))+" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.fechaFin,expression:"!props.row.fechaFin"}],attrs:{type:"is-info"},on:{click:function(n){return e.marcarFin(t.row)}}},[e._v(" Marcar fin ")])]}}])})],1)],1)],1)])},He=[],Te=n("0829"),Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),n("section",{staticClass:"modal-card-body"},[n("b-datepicker",{attrs:{inline:"",locale:"es-MX",placeholder:"Clic para seleccionar",icon:"calendar-today","trap-focus":""},model:{value:e.fechaSeleccionada,callback:function(t){e.fechaSeleccionada=t},expression:"fechaSeleccionada"}})],1),n("footer",{staticClass:"modal-card-foot"},[n("b-button",{attrs:{type:"is-success"},on:{click:function(t){return e.onFechaSeleccionada()}}},[e._v("Ok")]),n("b-button",{on:{click:function(t){return e.cerrar()}}},[e._v("Cancelar")])],1)])},Ye=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("Seleccione fecha")])])}],Ge={data:function(){return{fechaSeleccionada:new Date}},methods:{cerrar:function(){this.$parent.close()},onFechaSeleccionada:function(){this.$emit("seleccionada",this.fechaSeleccionada)}}},qe=Ge,Le=Object(s["a"])(qe,Ve,Ye,!1,null,null,null),Ue=Le.exports,Xe={components:{SeleccionadorFecha:Ue},data:function(){return{cargando:!1,apareamientos:[],conejos:[],coneja:{},mostrarModalFecha:!1,apareamientoSeleccionado:null}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.obtenerConeja();case 2:return t.next=4,e.obtenerConejosYEscucharCambios();case 4:return t.next=6,e.obtenerApareamientos();case 6:case"end":return t.stop()}}),t)})))()},methods:{marcarFin:function(e){this.apareamientoSeleccionado=e,this.mostrarModalFecha=!0},onFechaSeleccionada:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.cargando=!0,t.mostrarModalFecha=!1,o=Object.assign({},t.apareamientoSeleccionado),o.fechaFin=e.setHours(0,0,0,0),n.t0=Te["j"],n.t1=Te["d"],n.next=8,$.obtener();case 8:n.t2=n.sent,n.t3=t.apareamientoSeleccionado.id,n.t4=(0,n.t1)(n.t2,"apareamientos",n.t3),n.t5=o,(0,n.t0)(n.t4,n.t5),t.cargando=!1;case 14:case"end":return n.stop()}}),n)})))()},obtenerConeja:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.prev=1,t.next=4,D.obtenerConejoPorId(e.$route.params.id);case 4:e.coneja=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$buefy.toast.open("Error obteniendo coneja por id");case 10:return t.prev=10,e.cargando=!1,t.finish(10);case 13:e.cargando=!1;case 14:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})))()},conejoPorId:function(e){var t,n=Object(_["a"])(this.conejos);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.id===e)return o}}catch(a){n.e(a)}finally{n.f()}return{}},obtenerConejosYEscucharCambios:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.cargando=!0,D.obtenerConejosConGenero("M",(function(t){t.docChanges().forEach((function(t){e.cargando=!0;var n=t.doc.data(),o=t.doc.id;if("added"===t.type&&(n.id=o,e.conejos.push(n)),"modified"===t.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,n)}if("removed"===t.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.cargando=!1}));case 2:case"end":return t.stop()}}),t)})))()},indiceDeConejo:function(e){return this.conejos.findIndex((function(t){return t.id===e}))},indiceDeApareamiento:function(e){return this.apareamientos.findIndex((function(t){return t.id===e}))},volver:function(){this.$router.go(-1)},agregar:function(){this.$router.push({name:"AgregarApareamiento",params:{id:this.$route.params.id}})},obtenerApareamientos:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.t0=Te["i"],t.next=4,$.obtenerColeccionApareamientos();case 4:t.t1=t.sent,t.t2=Object(Te["k"])("madre","==",e.$route.params.id),n=(0,t.t0)(t.t1,t.t2),Object(Te["h"])(n,(function(t){t.docChanges().forEach((function(t){e.cargando=!0;var n=t.doc.data(),o=t.doc.id;if("added"===t.type&&(n.id=o,e.apareamientos.push(n)),"modified"===t.type){var a=e.indiceDeApareamiento(o);-1!==a&&e.$set(e.apareamientos,a,n)}if("removed"===t.type){var r=e.indiceDeApareamiento(o);-1!==r&&e.apareamientos.splice(r,1)}})),e.cargando=!1}));case 8:case"end":return t.stop()}}),t)})))()}}},Be=Xe,Je=Object(s["a"])(Be,ze,He,!1,null,null,null),We=Je.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-button",{attrs:{type:"is-info","icon-left":"arrow-left"},on:{click:e.volver}},[e._v("Volver ")]),n("br"),n("br"),n("b-notification",{attrs:{type:"is-success",closable:!1}},[n("strong",[e._v("Coneja: ")]),e._v(" "+e._s(e.coneja.identificador)+" ")]),n("b-field",{attrs:{label:"Padre"}},[n("select-conejos",{attrs:{genero:"M",conejoSeleccionado:e.apareamiento.padre},on:{"update:conejoSeleccionado":function(t){return e.$set(e.apareamiento,"padre",t)},"update:conejo-seleccionado":function(t){return e.$set(e.apareamiento,"padre",t)}}})],1),n("b-field",{attrs:{label:"Fecha de inicio"}},[n("b-datepicker",{attrs:{locale:"es-MX",placeholder:"Clic para seleccionar...",icon:"calendar-today","trap-focus":"","icon-right":e.apareamiento.fechaInicio?"close-circle":"","icon-right-clickable":""},on:{"icon-right-click":function(t){e.conejo.fechaInicio=null}},model:{value:e.apareamiento.fechaInicio,callback:function(t){e.$set(e.apareamiento,"fechaInicio",t)},expression:"apareamiento.fechaInicio"}})],1),n("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:e.guardar}},[e._v("Guardar")])],1)])])},Qe=[],Ze={components:{SelectConejos:V},data:function(){return{coleccionConejos:null,apareamiento:{padre:null,fechaInicio:new Date},cargando:!1,coneja:{}}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.obtenerConeja();case 2:return t.next=4,$.obtenerColeccionConejos();case 4:e.coleccionConejos=t.sent;case 5:case"end":return t.stop()}}),t)})))()},methods:{obtenerConeja:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.prev=1,t.next=4,D.obtenerConejoPorId(e.$route.params.id);case 4:e.coneja=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$buefy.toast.open("Error obteniendo coneja por id");case 10:return t.prev=10,e.cargando=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})))()},guardar:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.apareamiento.padre&&e.apareamiento.fechaInicio){t.next=2;break}return t.abrupt("return");case 2:return n=Object.assign({},e.apareamiento),n.fechaFin=null,n.fechaInicio=n.fechaInicio.setHours(0,0,0,0),n.padre=n.padre.id,n.madre=e.$route.params.id,t.t0=y["a"],t.next=10,$.obtenerColeccionApareamientos();case 10:t.t1=t.sent,t.t2=n,(0,t.t0)(t.t1,t.t2),e.$buefy.toast.open("Guardado");case 14:case"end":return t.stop()}}),t)})))()},volver:function(){this.$router.go(-1)}}},et=Ze,tt=Object(s["a"])(et,Ke,Qe,!1,null,null,null),nt=tt.exports,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:"Padre"}},[n("select-conejos",{ref:"select",attrs:{idForzarSeleccion:e.idPadre,genero:"M",conejoSeleccionado:e.conejo.padre},on:{"update:conejoSeleccionado":function(t){return e.$set(e.conejo,"padre",t)},"update:conejo-seleccionado":function(t){return e.$set(e.conejo,"padre",t)}}})],1),n("b-field",{attrs:{label:"Madre"}},[n("select-conejos",{ref:"selectMadre",attrs:{idForzarSeleccion:e.idMadre,genero:"H",conejoSeleccionado:e.conejo.madre},on:{"update:conejoSeleccionado":function(t){return e.$set(e.conejo,"madre",t)},"update:conejo-seleccionado":function(t){return e.$set(e.conejo,"madre",t)}}})],1),n("b-field",{attrs:{label:"Identificador"}},[n("b-input",{attrs:{readonly:"",placeholder:"Identificador"},model:{value:e.conejo.identificador,callback:function(t){e.$set(e.conejo,"identificador",t)},expression:"conejo.identificador"}})],1),n("b-field",{attrs:{label:"Género"}},[n("b-radio",{attrs:{name:"name","native-value":"M"},model:{value:e.conejo.genero,callback:function(t){e.$set(e.conejo,"genero",t)},expression:"conejo.genero"}},[e._v(" Macho ")]),n("b-radio",{attrs:{name:"name","native-value":"H"},model:{value:e.conejo.genero,callback:function(t){e.$set(e.conejo,"genero",t)},expression:"conejo.genero"}},[e._v(" Hembra ")])],1),n("b-field",{attrs:{label:"Fecha de nacimiento"}},[n("b-datepicker",{attrs:{locale:"es-MX",placeholder:"Clic para seleccionar...",icon:"calendar-today","trap-focus":"","icon-right":e.conejo.fechaNacimiento?"close-circle":"","icon-right-clickable":""},on:{"icon-right-click":function(t){e.conejo.fechaNacimiento=null}},model:{value:e.conejo.fechaNacimiento,callback:function(t){e.$set(e.conejo,"fechaNacimiento",t)},expression:"conejo.fechaNacimiento"}})],1),n("b-field",[n("b-upload",{attrs:{multiple:"","drag-drop":"",expanded:""},model:{value:e.fotosParaAgregar,callback:function(t){e.fotosParaAgregar=t},expression:"fotosParaAgregar"}},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-centered"},[n("p",[n("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),n("p",[e._v("Clic aquí para buscar las fotos")])])])])],1),n("div",{staticClass:"tags"},e._l(e.fotosParaAgregar,(function(t,o){return n("span",{key:o,staticClass:"tag is-primary"},[e._v(" "+e._s(t.name)+" ")])})),0),n("p",[e._v("Existentes:")]),n("div",{staticClass:"columns is-multiline"},e._l(e.conejo.fotos,(function(t,o){return n("div",{key:o,staticClass:"column is-one-quarter has-text-centered"},[n("foto-de-conejo",{attrs:{conejo:e.conejo,foto:t}}),n("b-button",{attrs:{loading:e.cargando,type:"is-danger"},on:{click:function(n){return e.eliminarFoto(t,o)}}},[n("b-icon",{attrs:{icon:"delete"}})],1)],1)})),0),n("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:function(t){return e.guardar()}}},[e._v("Guardar")]),e._v("   "),n("b-button",{attrs:{loading:e.cargando,type:"is-info"},on:{click:function(t){return e.volver()}}},[e._v("Volver")])],1)])])},at=[],rt={components:{SelectConejos:V,FotoDeConejo:te},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.next=3,D.obtenerConejoPorId(e.$route.params.id);case 3:return n=t.sent,n.fechaNacimiento&&(n.fechaNacimiento=new Date(n.fechaNacimiento)),e.conejo=n,e.idPadre=n.padre.id,e.idMadre=n.madre.id,t.next=10,$.obtenerColeccionConejos();case 10:e.coleccionConejos=t.sent,e.cargando=!1;case 12:case"end":return t.stop()}}),t)})))()},data:function(){return{idPadre:null,idMadre:null,conejo:{padre:{},madre:{},identificador:"",fechaNacimiento:null,fotos:[],genero:"M"},fotosParaAgregar:[],cargando:!1,coleccionConejos:null}},methods:{volver:function(){this.$router.go(-1)},eliminarFoto:function(e,t){var n=this;this.$buefy.dialog.confirm({message:"¿Eliminar foto? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, eliminar",onConfirm:function(){var o=Object(w["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n.cargando=!0,o.t0=O["a"],o.next=4,D.obtenerReferenciaParaFoto(n.conejo.identificador,e);case 4:return o.t1=o.sent,o.next=7,(0,o.t0)(o.t1);case 7:return n.conejo.fotos.splice(t,1),o.next=10,D.actualizarConejo(n.conejo.id,{fotos:n.conejo.fotos});case 10:n.cargando=!1,n.$buefy.toast.open("Eliminada");case 12:case"end":return o.stop()}}),o)})));function a(){return o.apply(this,arguments)}return a}()})},guardar:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n,o,a,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.cargando=!0,n=Object.assign({},e.conejo),Object.assign(n,e.conejo),o=e.fotosParaAgregar,n.fechaNacimiento&&(n.fechaNacimiento.setHours(0,0,0,0),n.fechaNacimiento=n.fechaNacimiento.getTime()),n.padre?n.padre={id:n.padre.id,identificador:n.padre.identificador}:n.padre={},n.madre?n.madre={id:n.madre.id,identificador:n.madre.identificador}:n.madre={},!(o.length>0)){t.next=34;break}a=Object(_["a"])(o),t.prev=9,a.s();case 11:if((r=a.n()).done){t.next=26;break}return c=r.value,n.fotos.push(c.name),t.next=16,D.obtenerReferenciaParaFoto(n.identificador,c.name);case 16:return i=t.sent,t.t0=O["e"],t.t1=i,t.next=21,I.comprimirImagen(c,20);case 21:return t.t2=t.sent,t.next=24,(0,t.t0)(t.t1,t.t2);case 24:t.next=11;break;case 26:t.next=31;break;case 28:t.prev=28,t.t3=t["catch"](9),a.e(t.t3);case 31:return t.prev=31,a.f(),t.finish(31);case 34:return t.next=36,D.actualizarConejo(n.id,n);case 36:e.cargando=!1,e.$buefy.toast.open("Actualizado correctamente"),e.volver();case 39:case"end":return t.stop()}}),t,null,[[9,28,31,34]])})))()}}},ct=rt,it=Object(s["a"])(ct,ot,at,!1,null,null,null),st=it.exports,lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("img",{staticClass:"image is-centered",attrs:{src:e.Pinto,alt:""}}),n("b-field",{attrs:{label:"Correo"}},[n("b-input",{attrs:{type:"email",placeholder:"tu@correo.aquí",loading:e.cargando},model:{value:e.correo,callback:function(t){e.correo=t},expression:"correo"}})],1),n("b-field",{attrs:{label:"Contraseña"}},[n("b-input",{attrs:{type:"password",placeholder:"Tu contraseña",loading:e.cargando},model:{value:e.palabraSecreta,callback:function(t){e.palabraSecreta=t},expression:"palabraSecreta"}})],1),n("b-button",{staticClass:"is-success",attrs:{loading:e.cargando},on:{click:function(t){return e.iniciarSesion()}}},[e._v("Iniciar sesión")])],1)])])},ut=[],dt=(n("caad"),n("2532"),n("ea7b")),ft={data:function(){return{correo:"",palabraSecreta:"",cargando:!1,Pinto:xe.a}},methods:{iniciarSesion:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.correo&&e.palabraSecreta){t.next=3;break}return e.$buefy.toast.open("Completa los campos"),t.abrupt("return");case 3:if(e.correo.includes("@")){t.next=6;break}return e.$buefy.toast.open("Escribe un correo válido"),t.abrupt("return");case 6:return e.cargando=!0,$.obtener(),n=Object(dt["a"])(),t.prev=9,t.next=12,Object(dt["c"])(n,e.correo,e.palabraSecreta);case 12:e.$buefy.toast.open("Bienvenido"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](9),e.$buefy.dialog.alert({title:"Error",message:"Error iniciando sesión. Verifica tu correo y contraseña. El error es: "+t.t0.message,type:"is-danger",hasIcon:!0,icon:"alert"});case 18:return t.prev=18,e.cargando=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[9,15,18,21]])})))()}}},pt=ft,mt=Object(s["a"])(pt,lt,ut,!1,null,null,null),bt=mt.exports;o["a"].use(v["a"]);var ht=new v["a"]({routes:[{path:"/",name:"Tabs",component:De},{path:"/apareamientos/:id",name:"Apareamientos",component:We},{path:"/agregar-apareamiento/:id",name:"AgregarApareamiento",component:nt},{path:"/editar-conejo/:id",name:"EditarConejo",component:st},{path:"/login",name:"Login",component:bt}]});$.obtener(),Object(dt["b"])(Object(dt["a"])(),(function(e){e?ht.push({name:"Tabs"}):"Login"!==ht.currentRoute.name&&ht.push({name:"Login"})})),ht.beforeEach((function(e,t,n){var o=Object(dt["a"])().currentUser;o||"Login"===e.name?n():n({name:"Login"})}));var vt=ht;o["a"].use(d["a"]),o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(u)},router:vt}).$mount("#app")},"85ec":function(e,t,n){},"8b81":function(e,t,n){}});