(function(e){function n(n){for(var o,c,i=n[0],s=n[1],u=n[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(n);while(f.length)f.shift()();return r.push.apply(r,u||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,i=1;i<t.length;i++){var s=t[i];0!==a[s]&&(o=!1)}o&&(r.splice(n--,1),e=c(c.s=t[0]))}return e}var o={},a={app:0},r=[];function c(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=o,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)c.d(t,o,function(n){return e[n]}.bind(null,o));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="./";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=n,i=i.slice();for(var u=0;u<i.length;u++)n(i[u]);var l=s;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("85ec")},"2a56":function(e,n,t){e.exports=t.p+"img/pinto.abe80838.jpg"},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"container"},[t("router-view")],1),t("footer",{staticClass:"footer"},[t("div",{staticClass:"content has-text-centered"},[t("p",[t("strong",[e._v("App para el control de conejos ")]),t("b-icon",{attrs:{icon:"code-tags"}}),e._v(" con "),t("b-icon",{attrs:{icon:"heart",type:"is-danger"}}),e._v(" por "),t("a",{attrs:{href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")])],1)])])])},r=[],c={name:"app"},i=c,s=(t("034f"),t("2877")),u=Object(s["a"])(i,a,r,!1,null,null,null),l=u.exports,d=(t("5363"),t("289d")),f=(t("5abe"),t("4de4"),t("d3b7"),t("99af"),864e5),p=365*f,m=p/12,b=function(e){if(!e)return"";var n=Math.floor(e/p);e-=n*p;var t=Math.floor(e/m);e-=t*m;var o=Math.floor(e/f);return j(n,t,o)},h=function(e){return b((new Date).getTime()-new Date(e))},v=function(e){if(!e.fechaNacimiento)return[];var n=(new Date).getTime()-e.fechaNacimiento,t=n/f,o=t/30,a=[];return t>=35&&t<=40&&a.push("Separar de la madre (debe ser a los 35 días de nacido)"),t>=70&&a.push("Listo para sacrificio (debe pesar entre 2 y 2.2 Kg)"),"H"===e.genero?o>4.5&&a.push("Lista para reproducción (debe pesar entre 3.5 y 3.8 Kg)"):o>5&&a.push("Listo para reproducción (debe pesar entre 3.8 y 4.2 Kg)"),a},g=function(e){if(!e.fechaInicio)return"";var n=(new Date).getTime()-e.fechaInicio,t=n/f;return t>=14&&t<=16?"Palpación":t>=25&&t<=27?"Nido para el parto":t>=29?"Parto (entre 29 y 30 días después del apareamiento)":void 0},j=function(e,n,t){var o="";return e>0&&(o+="".concat(e," año").concat(e>1?"s":""," ")),n>0&&(o+="".concat(n," mes").concat(n>1?"es":""," ")),t>0&&(o+="".concat(t," día").concat(t>1?"s":"")),o},w={diferenciaEnMilisegundosATiempoTranscurridoLegible:b,tiempoTranscurridoHastaHoy:h,"formatearAñosMesesYDias":j,informacionDeConejoSegunNacimiento:v,informacionDeGestacion:g},C=w,x=new Intl.DateTimeFormat("es-MX",{dateStyle:"medium"}),_=new Intl.NumberFormat("en",{style:"currency",currency:"MXN"});o["a"].filter("dinero",(function(e){return _.format(e)})),o["a"].filter("timestampAFecha",(function(e){return e?x.format(new Date(e)):""})),o["a"].filter("diferenciaAEdad",C.diferenciaEnMilisegundosATiempoTranscurridoLegible),o["a"].filter("edad",C.tiempoTranscurridoHastaHoy);t("b0c0");var y=t("8c4f"),k=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-tabs",{attrs:{type:"is-boxed",position:"is-centered"},model:{value:e.tabActiva,callback:function(n){e.tabActiva=n},expression:"tabActiva"}},[t("b-tab-item",{attrs:{icon:"plus",label:""}},[t("agregar-conejo")],1),t("b-tab-item",{attrs:{icon:"rabbit",label:""}},[t("conejos")],1),t("b-tab-item",{attrs:{icon:"cash",label:""}},[t("ventas")],1),t("b-tab-item",{attrs:{icon:"information"}},[t("acerca-de")],1),t("b-tab-item",{attrs:{icon:"logout"}},[t("section",{staticClass:"section"},[t("h3",{staticClass:"is-size-3"},[e._v("Cerrando sesión...")]),t("b-loading",{attrs:{"is-full-page":!1,active:!0}})],1)])],1)},O=[],S=t("1da1"),F=(t("96cf"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Padre"}},[t("select-conejos",{attrs:{genero:"M",conejoSeleccionado:e.conejo.padre},on:{"update:conejoSeleccionado":function(n){return e.$set(e.conejo,"padre",n)},"update:conejo-seleccionado":function(n){return e.$set(e.conejo,"padre",n)}}})],1),t("b-field",{attrs:{label:"Madre"}},[t("select-conejos",{attrs:{genero:"H",conejoSeleccionado:e.conejo.madre},on:{"update:conejoSeleccionado":function(n){return e.$set(e.conejo,"madre",n)},"update:conejo-seleccionado":function(n){return e.$set(e.conejo,"madre",n)}}})],1),t("b-field",{attrs:{label:"Identificador"}},[t("b-input",{attrs:{placeholder:"Identificador"},model:{value:e.conejo.identificador,callback:function(n){e.$set(e.conejo,"identificador",n)},expression:"conejo.identificador"}})],1),t("b-field",{attrs:{label:"Género"}},[t("b-radio",{attrs:{name:"name","native-value":"M"},model:{value:e.conejo.genero,callback:function(n){e.$set(e.conejo,"genero",n)},expression:"conejo.genero"}},[e._v(" Macho ")]),t("b-radio",{attrs:{name:"name","native-value":"H"},model:{value:e.conejo.genero,callback:function(n){e.$set(e.conejo,"genero",n)},expression:"conejo.genero"}},[e._v(" Hembra ")])],1),t("b-field",{attrs:{label:"Fecha de nacimiento"}},[t("b-datepicker",{attrs:{locale:"es-MX",placeholder:"Clic para seleccionar...",icon:"calendar-today","trap-focus":"","icon-right":e.conejo.fechaNacimiento?"close-circle":"","icon-right-clickable":""},on:{"icon-right-click":function(n){e.conejo.fechaNacimiento=null}},model:{value:e.conejo.fechaNacimiento,callback:function(n){e.$set(e.conejo,"fechaNacimiento",n)},expression:"conejo.fechaNacimiento"}})],1),t("b-field",[t("b-upload",{attrs:{multiple:"","drag-drop":"",expanded:""},model:{value:e.conejo.fotos,callback:function(n){e.$set(e.conejo,"fotos",n)},expression:"conejo.fotos"}},[t("section",{staticClass:"section"},[t("div",{staticClass:"content has-text-centered"},[t("p",[t("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),t("p",[e._v("Clic aquí para buscar las fotos")])])])])],1),t("div",{staticClass:"tags"},e._l(e.conejo.fotos,(function(n,o){return t("span",{key:o,staticClass:"tag is-primary"},[e._v(" "+e._s(n.name)+" ")])})),0),t("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:function(n){return e.guardar()}}},[e._v("Guardar")])],1)])}),R=[],$=t("b85c"),E=t("e71f"),I=(t("25f0"),t("260b")),M=t("588e"),N=t("aced"),P=!0,A={obtener:function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(){var n,t,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={apiKey:"AIzaSyCAW6xWHVFlvCleBg-Nmqn6ghT20YzSMRk",authDomain:"cunicultura-app.firebaseapp.com",databaseURL:"",projectId:"cunicultura-app",storageBucket:"cunicultura-app.appspot.com",messagingSenderId:"23487870452",appId:"1:23487870452:web:3b25575b0c9a7afb65f5a1"},t=Object(I["a"])(n),o=Object(E["g"])(t),e.next=5;break;case 5:if(!P){e.next=7;break}return e.abrupt("return",o);case 7:return e.prev=7,e.next=10,Object(E["e"])(o);case 10:N["a"].open({message:"Modo fuera de línea habilitado correctamente",type:"is-success"}),P=!0,e.next=21;break;case 14:e.prev=14,e.t0=e["catch"](7),console.log({err:e.t0}),a="","failed-precondition"==e.t0.code?a="Error: recuerda no tener varias pestañas abiertas con la app":"unimplemented"==e.t0.code&&(a="Error: el navegador que usas no soporta el modo fuera de línea. Cambia de navegador"),a+=" "+e.t0.toString(),N["a"].open({message:a,type:"is-danger"});case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,null,[[7,14]])})));function n(){return e.apply(this,arguments)}return n}(),obtenerStorage:function(){return Object(M["c"])()},obtenerColeccionConejos:function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=E["b"],e.next=3,A.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"conejos"));case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),obtenerColeccionVentas:function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=E["b"],e.next=3,A.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"ventas"));case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),obtenerColeccionApareamientos:function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=E["b"],e.next=3,A.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"apareamientos"));case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()},D=A,T=(t("3ca3"),t("ddb0"),t("2b3d"),t("9861"),{comprimirImagen:function(e,n){return new Promise((function(t,o){var a=document.createElement("canvas"),r=new Image;r.onload=function(){a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0),a.toBlob((function(e){if(null===e)return o(e);t(e)}),"image/jpeg",n/100)},r.src=URL.createObjectURL(e)}))}}),z=T,H=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-select",{attrs:{loading:e.cargando,placeholder:e.placeholder()},on:{input:e.onCambiado},model:{value:e.conejoSeleccionadoInterno,callback:function(n){e.conejoSeleccionadoInterno=n},expression:"conejoSeleccionadoInterno"}},e._l(e.conejos,(function(n){return t("option",{key:n.id,domProps:{value:n}},[e._v(" "+e._s(n.identificador)+" ")])})),0)},V=[],Y=(t("c740"),t("159b"),t("a434"),t("2909")),G={actualizarConejo:function(e,n){return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=E["j"],t.t1=E["d"],t.next=4,D.obtener();case 4:return t.t2=t.sent,t.t3=e,t.t4=(0,t.t1)(t.t2,"conejos",t.t3),t.t5=n,t.next=10,(0,t.t0)(t.t4,t.t5);case 10:case"end":return t.stop()}}),t)})))()},obtenerReferenciaParaFoto:function(e,n){return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(M["d"])(Object(M["c"])(),"conejos/"+e+"/"+n));case 1:case"end":return t.stop()}}),t)})))()},obtenerConejoPorId:function(e){return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=E["f"],n.t1=E["d"],n.next=4,D.obtener();case 4:return n.t2=n.sent,n.t3=e,n.t4=(0,n.t1)(n.t2,"conejos",n.t3),n.next=9,(0,n.t0)(n.t4);case 9:return t=n.sent,n.abrupt("return",new Promise((function(e,n){if(t.exists()){var o=t.data();o.id=t.id,e(o)}else n("No existe conejo con ese ID")})));case 11:case"end":return n.stop()}}),n)})))()},obtenerConejosConGenero:function(e,n){return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",G.obtenerConejosUsandoConsultas([Object(E["k"])("genero","==",e),Object(E["k"])("fechaFallecimiento","==",null),Object(E["k"])("vendido","==",!1)],n));case 1:case"end":return t.stop()}}),t)})))()},obtenerConejosUsandoConsultas:function(e,n){return Object(S["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D.obtenerColeccionConejos();case 2:o=t.sent,a=E["i"].apply(void 0,[o].concat(Object(Y["a"])(e))),Object(E["h"])(a,n);case 5:case"end":return t.stop()}}),t)})))()}},L=G,q={props:["conejoSeleccionado","genero","idForzarSeleccion"],data:function(){return{cargando:!1,conejos:[],conejoSeleccionadoInterno:{}}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.obtenerConejosYEscucharCambios();case 2:case"end":return n.stop()}}),n)})))()},watch:{idForzarSeleccion:function(){this.idForzarSeleccion&&this.seleccionarConejoConId(this.idForzarSeleccion)}},methods:{placeholder:function(){return"M"===this.genero?"Seleccione un conejo":"Selecciona una coneja"},onCambiado:function(e){this.$emit("update:conejoSeleccionado",e)},seleccionarConejoConId:function(e){var n=this.conejos.findIndex((function(n){return n.id===e}));-1!==n&&(this.conejoSeleccionadoInterno=this.conejos[n])},indiceDeConejo:function(e){return this.conejos.findIndex((function(n){return n.id===e}))},obtenerConejosYEscucharCambios:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.cargando=!0,L.obtenerConejosConGenero(e.genero,(function(n){n.docChanges().forEach((function(n){var t=n.doc.data(),o=n.doc.id;if("added"===n.type&&(t.id=o,e.conejos.push(t)),"modified"===n.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,t)}if("removed"===n.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.seleccionarConejoConId(e.idForzarSeleccion),e.cargando=!1}));case 2:case"end":return n.stop()}}),n)})))()}}},U=q,X=Object(s["a"])(U,H,V,!1,null,null,null),B=X.exports,K={components:{SelectConejos:B},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.next=3,D.obtenerColeccionConejos();case 3:e.coleccionConejos=n.sent,e.cargando=!1;case 5:case"end":return n.stop()}}),n)})))()},data:function(){return{conejo:{padre:null,madre:null,identificador:"",fechaNacimiento:null,fotos:[],genero:"M"},cargando:!1,coleccionConejos:null}},methods:{guardar:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t,o,a,r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.conejo.identificador){n.next=2;break}return n.abrupt("return");case 2:if(e.cargando=!0,t=Object.assign({},e.conejo),Object.assign(t,e.conejo),o=t.fotos,t.fotos=[],t.fechaFallecimiento=null,t.vendido=!1,t.fechaNacimiento&&(t.fechaNacimiento.setHours(0,0,0,0),t.fechaNacimiento=t.fechaNacimiento.getTime()),t.padre?t.padre={id:t.padre.id,identificador:t.padre.identificador}:t.padre={},t.madre?t.madre={id:t.madre.id,identificador:t.madre.identificador}:t.madre={},!(o.length>0)){n.next=39;break}a=Object($["a"])(o),n.prev=14,a.s();case 16:if((r=a.n()).done){n.next=31;break}return c=r.value,t.fotos.push(c.name),n.next=21,L.obtenerReferenciaParaFoto(t.identificador,c.name);case 21:return i=n.sent,n.t0=M["e"],n.t1=i,n.next=26,z.comprimirImagen(c,20);case 26:return n.t2=n.sent,n.next=29,(0,n.t0)(n.t1,n.t2);case 29:n.next=16;break;case 31:n.next=36;break;case 33:n.prev=33,n.t3=n["catch"](14),a.e(n.t3);case 36:return n.prev=36,a.f(),n.finish(36);case 39:Object(E["a"])(e.coleccionConejos,t),e.cargando=!1,e.$buefy.toast.open("Registro correcto"),e.conejo.identificador="",e.conejo.fechaNacimiento=null,e.conejo.fotos=[];case 45:case"end":return n.stop()}}),n,null,[[14,33,36,39]])})))()}}},J=K,W=Object(s["a"])(J,F,R,!1,null,null,null),Q=W.exports,Z=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"control"},[t("b-button",{attrs:{"icon-right":"filter-variant",type:"is-info"},on:{click:function(n){e.mostrarFiltros=!e.mostrarFiltros}}},[e._v("Filtrar")]),e._v("   "),t("b-taglist",{staticStyle:{display:"inline"},attrs:{attached:""}},[t("b-tag",{staticClass:"color-conejo",attrs:{size:"is-medium"}},[t("b-icon",{attrs:{icon:"gender-male"}}),e._v(" "+e._s(e.totalMachos()))],1),t("b-tag",{staticClass:"color-coneja",attrs:{size:"is-medium"}},[t("b-icon",{attrs:{icon:"gender-female"}}),e._v(" "+e._s(e.totalHembras()))],1),t("b-tag",{attrs:{size:"is-medium",type:"is-warning"}},[t("b-icon",{attrs:{icon:"sigma"}}),e._v(" "+e._s(e.totalMachos()+e.totalHembras()))],1)],1)],1)])]),t("div",{staticClass:"columns"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.mostrarFiltros,expression:"mostrarFiltros"}],staticClass:"column"},[t("b-field",{attrs:{label:"Estado"}},[t("b-select",{attrs:{loading:e.cargando,expanded:"",icon:"coffin"},nativeOn:{change:function(n){return e.obtenerConejosYEscucharCambios()}},model:{value:e.filtrosSeleccionados.fallecidos,callback:function(n){e.$set(e.filtrosSeleccionados,"fallecidos",n)},expression:"filtrosSeleccionados.fallecidos"}},e._l(e.filtros.fallecidos,(function(n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])})),0)],1),t("b-field",[t("b-select",{attrs:{loading:e.cargando,expanded:"",icon:"cash"},nativeOn:{change:function(n){return e.obtenerConejosYEscucharCambios()}},model:{value:e.filtrosSeleccionados.vendidos,callback:function(n){e.$set(e.filtrosSeleccionados,"vendidos",n)},expression:"filtrosSeleccionados.vendidos"}},e._l(e.filtros.vendidos,(function(n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])})),0)],1),t("b-field",{attrs:{label:"Género"}},[t("b-select",{attrs:{loading:e.cargando,expanded:"",icon:"gender-male"},nativeOn:{change:function(n){return e.obtenerConejosYEscucharCambios()}},model:{value:e.filtrosSeleccionados.genero,callback:function(n){e.$set(e.filtrosSeleccionados,"genero",n)},expression:"filtrosSeleccionados.genero"}},e._l(e.filtros.generos,(function(n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])})),0)],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-table",{attrs:{data:e.conejos,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[t("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0}])},[t("b-table-column",{attrs:{field:"identificador",label:"Identificador"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(n.row.identificador)+" ")]}}])}),t("b-table-column",{attrs:{field:"genero",label:"Género"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("b-icon",{directives:[{name:"show",rawName:"v-show",value:"H"===e.row.genero,expression:"props.row.genero === 'H'"}],staticClass:"icono-coneja",attrs:{icon:"gender-female"}}),t("b-icon",{directives:[{name:"show",rawName:"v-show",value:"M"===e.row.genero,expression:"props.row.genero === 'M'"}],staticClass:"icono-conejo",attrs:{icon:"gender-male"}})]}}])}),t("b-table-column",{attrs:{field:"padre",label:"Padres"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("b-tag",{directives:[{name:"show",rawName:"v-show",value:n.row.madre.identificador,expression:"props.row.madre.identificador"}],staticClass:"color-coneja",attrs:{size:"is-medium"}},[e._v(e._s(n.row.madre.identificador))]),e._v("   "),t("b-tag",{directives:[{name:"show",rawName:"v-show",value:n.row.padre.identificador,expression:"props.row.padre.identificador"}],staticClass:"color-conejo",attrs:{size:"is-medium"}},[e._v(e._s(n.row.padre.identificador))])]}}])}),t("b-table-column",{attrs:{field:"fotos"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("fotos-de-conejo",{attrs:{conejo:e.row}})]}}])}),t("b-table-column",{attrs:{label:"Edad"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e._f("timestampAFecha")(n.row.fechaNacimiento))+" "),t("span",{directives:[{name:"show",rawName:"v-show",value:n.row.fechaFallecimiento,expression:"props.row.fechaFallecimiento"}]},[e._v(" - "+e._s(e._f("timestampAFecha")(n.row.fechaFallecimiento))+" "),t("b-icon",{attrs:{icon:"coffin"}})],1),n.row.fechaFallecimiento?t("span",[e._v("("+e._s(e._f("diferenciaAEdad")(n.row.fechaFallecimiento-n.row.fechaNacimiento))+")")]):t("span",[e._v(" ("+e._s(e._f("edad")(n.row.fechaNacimiento))+") ")])]}}])}),t("b-table-column",{attrs:{label:"Información"},scopedSlots:e._u([{key:"default",fn:function(n){return e._l(e.informacion(n.row),(function(n,o){return t("ul",{key:o},[t("li",[e._v(e._s(n))])])}))}}])}),t("b-table-column",{attrs:{field:"id",label:"Opciones"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("b-button",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFallecimiento&&!n.row.vendido,expression:"!props.row.fechaFallecimiento && !props.row.vendido"}],attrs:{type:"is-info"},on:{click:function(t){return e.editar(n.row)}}},[t("b-icon",{attrs:{icon:"pencil"}})],1),e._v("   "),t("b-button",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFallecimiento&&!n.row.vendido&&"H"===n.row.genero,expression:"\n              !props.row.fechaFallecimiento &&\n              !props.row.vendido &&\n              props.row.genero === 'H'\n            "}],attrs:{type:"is-danger",outlined:""},on:{click:function(t){return e.apareamientos(n.row)}}},[t("b-icon",{attrs:{icon:"heart"}})],1),e._v("   "),t("b-button",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFallecimiento&&!n.row.vendido,expression:"!props.row.fechaFallecimiento && !props.row.vendido"}],attrs:{type:"is-success"},on:{click:function(t){return e.marcarVendido(n.row)}}},[t("b-icon",{attrs:{icon:"cash"}})],1),e._v("   "),t("b-button",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFallecimiento&&!n.row.vendido,expression:"!props.row.fechaFallecimiento && !props.row.vendido"}],attrs:{type:"is-warning"},on:{click:function(t){return e.marcarFallecido(n.row)}}},[t("b-icon",{attrs:{icon:"coffin"}})],1),e._v("   "),t("b-button",{attrs:{type:"is-danger"},on:{click:function(t){return e.eliminar(n.row)}}},[t("b-icon",{attrs:{icon:"delete"}})],1),e._v("   "),t("b-tag",{directives:[{name:"show",rawName:"v-show",value:n.row.vendido,expression:"props.row.vendido"}],attrs:{type:"is-success"}},[e._v(" Vendido ")])]}}])})],1)],1)])])},ee=[],ne=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-carousel",{directives:[{name:"show",rawName:"v-show",value:e.conejo.fotos&&e.conejo.fotos.length>0,expression:"conejo.fotos && conejo.fotos.length > 0"}],staticStyle:{"max-width":"400px"},attrs:{"pause-info":!1}},e._l(e.conejo.fotos,(function(n,o){return t("b-carousel-item",{key:e.conejo.identificador+o,nativeOn:{click:function(e){e.stopPropagation()}}},[t("foto-de-conejo",{attrs:{conejo:e.conejo,foto:n}})],1)})),1)},te=[],oe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("b-loading",{attrs:{"is-full-page":!1,"can-cancel":!0},model:{value:e.cargando,callback:function(n){e.cargando=n},expression:"cargando"}}),t("img",{directives:[{name:"show",rawName:"v-show",value:e.url,expression:"url"}],attrs:{src:e.url,alt:""},on:{click:e.ampliarImagen}}),t("b-modal",{on:{"after-leave":e.onModalCerrado},model:{value:e.mostrarModal,callback:function(n){e.mostrarModal=n},expression:"mostrarModal"}},[t("p",{staticClass:"image"},[t("img",{attrs:{src:e.url}})])])],1)},ae=[],re={props:["conejo","foto"],data:function(){return{url:"",mostrarModal:!1,click:!1,cargando:!1}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.next=3,Object(M["b"])(Object(M["d"])(Object(M["c"])(),"conejos/".concat(e.conejo.identificador,"/").concat(e.foto)));case 3:e.url=n.sent,e.cargando=!1;case 5:case"end":return n.stop()}}),n)})))()},methods:{onModalCerrado:function(){this.click=!1},ampliarImagen:function(){this.click||(this.mostrarModal=!0,this.click=!0)}}},ce=re,ie=Object(s["a"])(ce,oe,ae,!1,null,null,null),se=ie.exports,ue={components:{FotoDeConejo:se},props:["conejo"]},le=ue,de=Object(s["a"])(le,ne,te,!1,null,null,null),fe=de.exports,pe="Fallecidos",me="Vivos",be="Todos",he="Vendidos",ve="No vendidos",ge="Todos",je="Todos",we="H",Ce="M",xe={components:{FotosDeConejo:fe},data:function(){return{mostrarFiltros:!1,filtrosSeleccionados:{fallecidos:me,vendidos:ve,genero:je},filtros:{fallecidos:[pe,me,be],vendidos:[he,ve,ge],generos:[Ce,we,je]},conejos:[],cargando:!1,bd:null}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,D.obtener();case 2:return e.bd=n.sent,n.next=5,e.obtenerConejosYEscucharCambios();case 5:case"end":return n.stop()}}),n)})))()},methods:{informacion:C.informacionDeConejoSegunNacimiento,editar:function(e){this.$router.push({name:"EditarConejo",params:{id:e.id}})},totalMachos:function(){var e,n=0,t=Object($["a"])(this.conejos);try{for(t.s();!(e=t.n()).done;){var o=e.value;o.genero===Ce&&n++}}catch(a){t.e(a)}finally{t.f()}return n},totalHembras:function(){var e,n=0,t=Object($["a"])(this.conejos);try{for(t.s();!(e=t.n()).done;){var o=e.value;o.genero===we&&n++}}catch(a){t.e(a)}finally{t.f()}return n},apareamientos:function(e){this.$router.push({name:"Apareamientos",params:{id:e.id}})},marcarFallecido:function(e){var n=this;this.$buefy.dialog.confirm({message:"¿Marcar como fallecido? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, marcar",onConfirm:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fechaFallecimiento=(new Date).setHours(0,0,0,0),Object(E["j"])(Object(E["d"])(n.bd,"conejos",e.id),e);case 2:case"end":return t.stop()}}),t)})));function o(){return t.apply(this,arguments)}return o}()})},marcarVendido:function(e){var n=this;this.$buefy.dialog.prompt({message:"Ingresa la cantidad: ",inputAttrs:{type:"number",placeholder:"Escribe la cantidad",min:1},trapFocus:!0,onConfirm:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=parseFloat(o),e.vendido=!0,t.t0=E["a"],t.next=5,D.obtenerColeccionVentas();case 5:t.t1=t.sent,t.t2={monto:o,idConejo:e.id,fecha:(new Date).getTime()},(0,t.t0)(t.t1,t.t2),Object(E["j"])(Object(E["d"])(n.bd,"conejos",e.id),e),n.$buefy.toast.open("Vendido");case 10:case"end":return t.stop()}}),t)})));function o(e){return t.apply(this,arguments)}return o}()})},eliminar:function(e){var n=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.$buefy.dialog.confirm({message:"¿Eliminar conejo? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, eliminar",onConfirm:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(){var o,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.cargando=!0,o=Object($["a"])(e.fotos),t.prev=2,o.s();case 4:if((a=o.n()).done){t.next=14;break}return r=a.value,t.t0=M["a"],t.next=9,L.obtenerReferenciaParaFoto(e.identificador,r);case 9:return t.t1=t.sent,t.next=12,(0,t.t0)(t.t1);case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t2=t["catch"](2),o.e(t.t2);case 19:return t.prev=19,o.f(),t.finish(19);case 22:return t.t3=E["c"],t.t4=E["d"],t.next=26,D.obtener();case 26:return t.t5=t.sent,t.t6=e.id,t.t7=(0,t.t4)(t.t5,"conejos",t.t6),t.next=31,(0,t.t3)(t.t7);case 31:n.cargando=!1,n.$buefy.toast.open("Eliminado");case 33:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));function o(){return t.apply(this,arguments)}return o}()});case 1:case"end":return t.stop()}}),t)})))()},obtenerConejosYEscucharCambios:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.conejos=[],t=[],e.filtrosSeleccionados.fallecidos===me?t.push(Object(E["k"])("fechaFallecimiento","==",null)):e.filtrosSeleccionados.fallecidos===pe&&t.push(Object(E["k"])("fechaFallecimiento","!=",null)),e.filtrosSeleccionados.vendidos===he?t.push(Object(E["k"])("vendido","==",!0)):e.filtrosSeleccionados.vendidos===ve&&t.push(Object(E["k"])("vendido","==",!1)),e.filtrosSeleccionados.genero===we?t.push(Object(E["k"])("genero","==","H")):e.filtrosSeleccionados.genero===Ce&&t.push(Object(E["k"])("genero","==","M")),e.cargando=!0,L.obtenerConejosUsandoConsultas(t,(function(n){n.docChanges().forEach((function(n){e.cargando=!0;var t=n.doc.data(),o=n.doc.id;if("added"===n.type&&(t.id=o,e.conejos.push(t)),"modified"===n.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,t)}if("removed"===n.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.cargando=!1}));case 7:case"end":return n.stop()}}),n)})))()},indiceDeConejo:function(e){return this.conejos.findIndex((function(n){return n.id===e}))}}},_e=xe,ye=(t("a98c"),Object(s["a"])(_e,Z,ee,!1,null,"746184f8",null)),ke=ye.exports,Oe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"hero is-medium is-info"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container"},[t("h1",{staticClass:"title"},[e._v("Acerca de")]),t("img",{staticClass:"image",attrs:{title:"El conejo pinto",src:e.Pinto}}),t("h2",{staticClass:"subtitle"},[e._v("App para cunicultura")]),e._v(" Creado y mantenido con "),t("b-icon",{attrs:{icon:"heart",type:"is-danger"}}),e._v(" por "),t("a",{staticClass:"has-text-warning",attrs:{target:"_blank",href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")]),e._v(" usando "),t("b-icon",{attrs:{icon:"vuejs"}}),e._v(" y "),t("b-icon",{attrs:{icon:"firebase"}}),t("br"),t("a",{staticClass:"has-text-warning",attrs:{target:"_blank",href:"https://parzibyte.me/blog/sigueme/"}},[e._v("Puedes seguirme aquí")]),e._v(" y ver "),t("a",{staticClass:"has-text-warning",attrs:{href:"https://parzibyte.me/blog/software-creado-por-parzibyte/",target:"_blank"}},[e._v("más proyectos aquí")]),t("hr"),t("h4",{staticClass:"is-size-4"},[e._v("Créditos de iconos")]),t("a",{attrs:{href:"https://www.flaticon.com/free-icons/rabbit",title:"rabbit icons"}},[e._v("Rabbit icons created by torskaya - Flaticon")])],1)])])},Se=[],Fe=t("2a56"),Re=t.n(Fe),$e={data:function(){return{Pinto:Re.a}}},Ee=$e,Ie=Object(s["a"])(Ee,Oe,Se,!1,null,null,null),Me=Ie.exports,Ne=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"section"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-table",{attrs:{data:e.ventas,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[t("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0},{key:"footer",fn:function(){return[t("th",[t("div",{staticClass:"th-wrap"},[e._v("Total")])]),t("th",{attrs:{colspan:"2"}},[t("div",{staticClass:"th-wrap"},[e._v(e._s(e._f("dinero")(e.total())))])])]},proxy:!0}])},[t("b-table-column",{attrs:{field:"idConejo",label:"Conejo"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e.conejoPorId(n.row.idConejo).identificador)+" ")]}}])}),t("b-table-column",{attrs:{field:"monto",label:"Monto"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e._f("dinero")(n.row.monto))+" ")]}}])}),t("b-table-column",{attrs:{field:"padre",label:"Fecha"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e._f("timestampAFecha")(n.row.fecha))+" ")]}}])})],1)],1)])])},Pe=[],Ae={data:function(){return{ventas:[],cargando:!1,conejos:[]}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.obtenerConejosYEscucharCambios();case 2:return n.next=4,e.obtenerVentasYEscucharCambios();case 4:case"end":return n.stop()}}),n)})))()},methods:{total:function(){var e,n=0,t=Object($["a"])(this.ventas);try{for(t.s();!(e=t.n()).done;){var o=e.value;n+=o.monto}}catch(a){t.e(a)}finally{t.f()}return n},conejoPorId:function(e){var n,t=Object($["a"])(this.conejos);try{for(t.s();!(n=t.n()).done;){var o=n.value;if(o.id===e)return o}}catch(a){t.e(a)}finally{t.f()}return{}},obtenerConejosYEscucharCambios:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.cargando=!0,L.obtenerConejosUsandoConsultas([Object(E["k"])("fechaFallecimiento","==",null)],(function(n){n.docChanges().forEach((function(n){e.cargando=!0;var t=n.doc.data(),o=n.doc.id;if("added"===n.type&&(t.id=o,e.conejos.push(t)),"modified"===n.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,t)}if("removed"===n.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.cargando=!1}));case 2:case"end":return n.stop()}}),n)})))()},indiceDeConejo:function(e){return this.conejos.findIndex((function(n){return n.id===e}))},indiceDeVenta:function(e){return this.ventas.findIndex((function(n){return n.id===e}))},obtenerVentasYEscucharCambios:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.t0=E["i"],n.next=4,D.obtenerColeccionVentas();case 4:n.t1=n.sent,t=(0,n.t0)(n.t1),Object(E["h"])(t,(function(n){n.docChanges().forEach((function(n){e.cargando=!0;var t=n.doc.data(),o=n.doc.id;if("added"===n.type&&(t.id=o,e.ventas.push(t)),"modified"===n.type){var a=e.indiceDeVenta(o);-1!==a&&e.$set(e.ventas,a,t)}if("removed"===n.type){var r=e.indiceDeVenta(o);-1!==r&&e.ventas.splice(r,1)}})),e.cargando=!1}));case 7:case"end":return n.stop()}}),n)})))()}}},De=Ae,Te=Object(s["a"])(De,Ne,Pe,!1,null,null,null),ze=Te.exports,He=t("6a7c"),Ve={components:{AgregarConejo:Q,Conejos:ke,AcercaDe:Me,Ventas:ze},data:function(){return{tabActiva:1}},watch:{tabActiva:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(4!==e.tabActiva){n.next=10;break}return n.prev=1,n.next=4,Object(He["d"])(Object(He["a"])());case 4:e.$buefy.toast.open("Hasta pronto"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),e.$buefy.toast.open("Error cerrando sesión: "+n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},Ye=Ve,Ge=Object(s["a"])(Ye,k,O,!1,null,null,null),Le=Ge.exports,qe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"section"},[t("div",{staticClass:"columns"},[t("b-modal",{attrs:{active:e.mostrarModalFecha,"has-modal-card":"","trap-focus":""},on:{"update:active":function(n){e.mostrarModalFecha=n}}},[t("seleccionador-fecha",{on:{seleccionada:e.onFechaSeleccionada}})],1),t("div",{staticClass:"column"},[t("b-button",{attrs:{loading:e.cargando,type:"is-info","icon-left":"arrow-left"},on:{click:e.volver}},[e._v("Volver ")]),e._v("   "),t("b-button",{attrs:{loading:e.cargando,type:"is-success","icon-left":"plus"},on:{click:e.agregar}},[e._v("Agregar ")]),t("br"),t("br"),t("b-notification",{attrs:{type:"is-success",closable:!1}},[t("strong",[e._v("Coneja: ")]),e._v(" "+e._s(e.coneja.identificador)+" ")]),t("b-table",{attrs:{data:e.apareamientos,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[t("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0}])},[t("b-table-column",{attrs:{field:"padre",label:"Padre"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e.conejoPorId(n.row.padre).identificador)+" ")]}}])}),t("b-table-column",{attrs:{label:"Inicio"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e._f("timestampAFecha")(n.row.fechaInicio))+" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFin,expression:"!props.row.fechaFin"}]},[e._v("("+e._s(e._f("edad")(n.row.fechaInicio))+")")]),t("span",{directives:[{name:"show",rawName:"v-show",value:n.row.fechaFin,expression:"props.row.fechaFin"}]},[e._v("("+e._s(e._f("diferenciaAEdad")(n.row.fechaFin-n.row.fechaInicio))+")")])]}}])}),t("b-table-column",{attrs:{label:"Información"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFin,expression:"!props.row.fechaFin"}]},[e._v(" "+e._s(e.informacion(n.row))+" ")])]}}])}),t("b-table-column",{attrs:{field:"fechaFin",label:"Fin"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e._f("timestampAFecha")(n.row.fechaFin))+" "),t("b-button",{directives:[{name:"show",rawName:"v-show",value:!n.row.fechaFin,expression:"!props.row.fechaFin"}],attrs:{type:"is-info"},on:{click:function(t){return e.marcarFin(n.row)}}},[e._v(" Marcar fin ")])]}}])})],1)],1)],1)])},Ue=[],Xe=t("0829"),Be=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),t("section",{staticClass:"modal-card-body"},[t("b-datepicker",{attrs:{inline:"",locale:"es-MX",placeholder:"Clic para seleccionar",icon:"calendar-today","trap-focus":""},model:{value:e.fechaSeleccionada,callback:function(n){e.fechaSeleccionada=n},expression:"fechaSeleccionada"}})],1),t("footer",{staticClass:"modal-card-foot"},[t("b-button",{attrs:{type:"is-success"},on:{click:function(n){return e.onFechaSeleccionada()}}},[e._v("Ok")]),t("b-button",{on:{click:function(n){return e.cerrar()}}},[e._v("Cancelar")])],1)])},Ke=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v("Seleccione fecha")])])}],Je={data:function(){return{fechaSeleccionada:new Date}},methods:{cerrar:function(){this.$parent.close()},onFechaSeleccionada:function(){this.$emit("seleccionada",this.fechaSeleccionada)}}},We=Je,Qe=Object(s["a"])(We,Be,Ke,!1,null,null,null),Ze=Qe.exports,en={components:{SeleccionadorFecha:Ze},data:function(){return{cargando:!1,apareamientos:[],conejos:[],coneja:{},mostrarModalFecha:!1,apareamientoSeleccionado:null}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.obtenerConeja();case 2:return n.next=4,e.obtenerConejosYEscucharCambios();case 4:return n.next=6,e.obtenerApareamientos();case 6:case"end":return n.stop()}}),n)})))()},methods:{informacion:C.informacionDeGestacion,marcarFin:function(e){this.apareamientoSeleccionado=e,this.mostrarModalFecha=!0},onFechaSeleccionada:function(e){var n=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.cargando=!0,n.mostrarModalFecha=!1,o=Object.assign({},n.apareamientoSeleccionado),o.fechaFin=e.setHours(0,0,0,0),t.t0=Xe["j"],t.t1=Xe["d"],t.next=8,D.obtener();case 8:t.t2=t.sent,t.t3=n.apareamientoSeleccionado.id,t.t4=(0,t.t1)(t.t2,"apareamientos",t.t3),t.t5=o,(0,t.t0)(t.t4,t.t5),n.cargando=!1;case 14:case"end":return t.stop()}}),t)})))()},obtenerConeja:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.prev=1,n.next=4,L.obtenerConejoPorId(e.$route.params.id);case 4:e.coneja=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),e.$buefy.toast.open("Error obteniendo coneja por id");case 10:return n.prev=10,e.cargando=!1,n.finish(10);case 13:e.cargando=!1;case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})))()},conejoPorId:function(e){var n,t=Object($["a"])(this.conejos);try{for(t.s();!(n=t.n()).done;){var o=n.value;if(o.id===e)return o}}catch(a){t.e(a)}finally{t.f()}return{}},obtenerConejosYEscucharCambios:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.cargando=!0,L.obtenerConejosConGenero("M",(function(n){n.docChanges().forEach((function(n){e.cargando=!0;var t=n.doc.data(),o=n.doc.id;if("added"===n.type&&(t.id=o,e.conejos.push(t)),"modified"===n.type){var a=e.indiceDeConejo(o);-1!==a&&e.$set(e.conejos,a,t)}if("removed"===n.type){var r=e.indiceDeConejo(o);-1!==r&&e.conejos.splice(r,1)}})),e.cargando=!1}));case 2:case"end":return n.stop()}}),n)})))()},indiceDeConejo:function(e){return this.conejos.findIndex((function(n){return n.id===e}))},indiceDeApareamiento:function(e){return this.apareamientos.findIndex((function(n){return n.id===e}))},volver:function(){this.$router.go(-1)},agregar:function(){this.$router.push({name:"AgregarApareamiento",params:{id:this.$route.params.id}})},obtenerApareamientos:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.t0=Xe["i"],n.next=4,D.obtenerColeccionApareamientos();case 4:n.t1=n.sent,n.t2=Object(Xe["k"])("madre","==",e.$route.params.id),t=(0,n.t0)(n.t1,n.t2),Object(Xe["h"])(t,(function(n){n.docChanges().forEach((function(n){e.cargando=!0;var t=n.doc.data(),o=n.doc.id;if("added"===n.type&&(t.id=o,e.apareamientos.push(t)),"modified"===n.type){var a=e.indiceDeApareamiento(o);-1!==a&&e.$set(e.apareamientos,a,t)}if("removed"===n.type){var r=e.indiceDeApareamiento(o);-1!==r&&e.apareamientos.splice(r,1)}})),e.cargando=!1}));case 8:case"end":return n.stop()}}),n)})))()}}},nn=en,tn=Object(s["a"])(nn,qe,Ue,!1,null,null,null),on=tn.exports,an=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"section"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-button",{attrs:{type:"is-info","icon-left":"arrow-left"},on:{click:e.volver}},[e._v("Volver ")]),t("br"),t("br"),t("b-notification",{attrs:{type:"is-success",closable:!1}},[t("strong",[e._v("Coneja: ")]),e._v(" "+e._s(e.coneja.identificador)+" ")]),t("b-field",{attrs:{label:"Padre"}},[t("select-conejos",{attrs:{genero:"M",conejoSeleccionado:e.apareamiento.padre},on:{"update:conejoSeleccionado":function(n){return e.$set(e.apareamiento,"padre",n)},"update:conejo-seleccionado":function(n){return e.$set(e.apareamiento,"padre",n)}}})],1),t("b-field",{attrs:{label:"Fecha de inicio"}},[t("b-datepicker",{attrs:{locale:"es-MX",placeholder:"Clic para seleccionar...",icon:"calendar-today","trap-focus":"","icon-right":e.apareamiento.fechaInicio?"close-circle":"","icon-right-clickable":""},on:{"icon-right-click":function(n){e.conejo.fechaInicio=null}},model:{value:e.apareamiento.fechaInicio,callback:function(n){e.$set(e.apareamiento,"fechaInicio",n)},expression:"apareamiento.fechaInicio"}})],1),t("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:e.guardar}},[e._v("Guardar")])],1)])])},rn=[],cn={components:{SelectConejos:B},data:function(){return{coleccionConejos:null,apareamiento:{padre:null,fechaInicio:new Date},cargando:!1,coneja:{}}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.obtenerConeja();case 2:return n.next=4,D.obtenerColeccionConejos();case 4:e.coleccionConejos=n.sent;case 5:case"end":return n.stop()}}),n)})))()},methods:{obtenerConeja:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.prev=1,n.next=4,L.obtenerConejoPorId(e.$route.params.id);case 4:e.coneja=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),e.$buefy.toast.open("Error obteniendo coneja por id");case 10:return n.prev=10,e.cargando=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})))()},guardar:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.apareamiento.padre&&e.apareamiento.fechaInicio){n.next=2;break}return n.abrupt("return");case 2:return t=Object.assign({},e.apareamiento),t.fechaFin=null,t.fechaInicio=t.fechaInicio.setHours(0,0,0,0),t.padre=t.padre.id,t.madre=e.$route.params.id,n.t0=E["a"],n.next=10,D.obtenerColeccionApareamientos();case 10:n.t1=n.sent,n.t2=t,(0,n.t0)(n.t1,n.t2),e.$buefy.toast.open("Guardado");case 14:case"end":return n.stop()}}),n)})))()},volver:function(){this.$router.go(-1)}}},sn=cn,un=Object(s["a"])(sn,an,rn,!1,null,null,null),ln=un.exports,dn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"section"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Padre"}},[t("select-conejos",{ref:"select",attrs:{idForzarSeleccion:e.idPadre,genero:"M",conejoSeleccionado:e.conejo.padre},on:{"update:conejoSeleccionado":function(n){return e.$set(e.conejo,"padre",n)},"update:conejo-seleccionado":function(n){return e.$set(e.conejo,"padre",n)}}})],1),t("b-field",{attrs:{label:"Madre"}},[t("select-conejos",{ref:"selectMadre",attrs:{idForzarSeleccion:e.idMadre,genero:"H",conejoSeleccionado:e.conejo.madre},on:{"update:conejoSeleccionado":function(n){return e.$set(e.conejo,"madre",n)},"update:conejo-seleccionado":function(n){return e.$set(e.conejo,"madre",n)}}})],1),t("b-field",{attrs:{label:"Identificador"}},[t("b-input",{attrs:{readonly:"",placeholder:"Identificador"},model:{value:e.conejo.identificador,callback:function(n){e.$set(e.conejo,"identificador",n)},expression:"conejo.identificador"}})],1),t("b-field",{attrs:{label:"Género"}},[t("b-radio",{attrs:{name:"name","native-value":"M"},model:{value:e.conejo.genero,callback:function(n){e.$set(e.conejo,"genero",n)},expression:"conejo.genero"}},[e._v(" Macho ")]),t("b-radio",{attrs:{name:"name","native-value":"H"},model:{value:e.conejo.genero,callback:function(n){e.$set(e.conejo,"genero",n)},expression:"conejo.genero"}},[e._v(" Hembra ")])],1),t("b-field",{attrs:{label:"Fecha de nacimiento"}},[t("b-datepicker",{attrs:{locale:"es-MX",placeholder:"Clic para seleccionar...",icon:"calendar-today","trap-focus":"","icon-right":e.conejo.fechaNacimiento?"close-circle":"","icon-right-clickable":""},on:{"icon-right-click":function(n){e.conejo.fechaNacimiento=null}},model:{value:e.conejo.fechaNacimiento,callback:function(n){e.$set(e.conejo,"fechaNacimiento",n)},expression:"conejo.fechaNacimiento"}})],1),t("b-field",[t("b-upload",{attrs:{multiple:"","drag-drop":"",expanded:""},model:{value:e.fotosParaAgregar,callback:function(n){e.fotosParaAgregar=n},expression:"fotosParaAgregar"}},[t("section",{staticClass:"section"},[t("div",{staticClass:"content has-text-centered"},[t("p",[t("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),t("p",[e._v("Clic aquí para buscar las fotos")])])])])],1),t("div",{staticClass:"tags"},e._l(e.fotosParaAgregar,(function(n,o){return t("span",{key:o,staticClass:"tag is-primary"},[e._v(" "+e._s(n.name)+" ")])})),0),t("p",[e._v("Existentes:")]),t("div",{staticClass:"columns is-multiline"},e._l(e.conejo.fotos,(function(n,o){return t("div",{key:o,staticClass:"column is-one-quarter has-text-centered"},[t("foto-de-conejo",{attrs:{conejo:e.conejo,foto:n}}),t("b-button",{attrs:{loading:e.cargando,type:"is-danger"},on:{click:function(t){return e.eliminarFoto(n,o)}}},[t("b-icon",{attrs:{icon:"delete"}})],1)],1)})),0),t("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:function(n){return e.guardar()}}},[e._v("Guardar")]),e._v("   "),t("b-button",{attrs:{loading:e.cargando,type:"is-info"},on:{click:function(n){return e.volver()}}},[e._v("Volver")])],1)])])},fn=[],pn={components:{SelectConejos:B,FotoDeConejo:se},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.cargando=!0,n.next=3,L.obtenerConejoPorId(e.$route.params.id);case 3:return t=n.sent,t.fechaNacimiento&&(t.fechaNacimiento=new Date(t.fechaNacimiento)),e.conejo=t,e.idPadre=t.padre.id,e.idMadre=t.madre.id,n.next=10,D.obtenerColeccionConejos();case 10:e.coleccionConejos=n.sent,e.cargando=!1;case 12:case"end":return n.stop()}}),n)})))()},data:function(){return{idPadre:null,idMadre:null,conejo:{padre:{},madre:{},identificador:"",fechaNacimiento:null,fotos:[],genero:"M"},fotosParaAgregar:[],cargando:!1,coleccionConejos:null}},methods:{volver:function(){this.$router.go(-1)},eliminarFoto:function(e,n){var t=this;this.$buefy.dialog.confirm({message:"¿Eliminar foto? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, eliminar",onConfirm:function(){var o=Object(S["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.cargando=!0,o.t0=M["a"],o.next=4,L.obtenerReferenciaParaFoto(t.conejo.identificador,e);case 4:return o.t1=o.sent,o.next=7,(0,o.t0)(o.t1);case 7:return t.conejo.fotos.splice(n,1),o.next=10,L.actualizarConejo(t.conejo.id,{fotos:t.conejo.fotos});case 10:t.cargando=!1,t.$buefy.toast.open("Eliminada");case 12:case"end":return o.stop()}}),o)})));function a(){return o.apply(this,arguments)}return a}()})},guardar:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t,o,a,r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.cargando=!0,t=Object.assign({},e.conejo),Object.assign(t,e.conejo),o=e.fotosParaAgregar,t.fechaNacimiento&&(t.fechaNacimiento.setHours(0,0,0,0),t.fechaNacimiento=t.fechaNacimiento.getTime()),t.padre?t.padre={id:t.padre.id,identificador:t.padre.identificador}:t.padre={},t.madre?t.madre={id:t.madre.id,identificador:t.madre.identificador}:t.madre={},!(o.length>0)){n.next=34;break}a=Object($["a"])(o),n.prev=9,a.s();case 11:if((r=a.n()).done){n.next=26;break}return c=r.value,t.fotos.push(c.name),n.next=16,L.obtenerReferenciaParaFoto(t.identificador,c.name);case 16:return i=n.sent,n.t0=M["e"],n.t1=i,n.next=21,z.comprimirImagen(c,20);case 21:return n.t2=n.sent,n.next=24,(0,n.t0)(n.t1,n.t2);case 24:n.next=11;break;case 26:n.next=31;break;case 28:n.prev=28,n.t3=n["catch"](9),a.e(n.t3);case 31:return n.prev=31,a.f(),n.finish(31);case 34:return n.next=36,L.actualizarConejo(t.id,t);case 36:e.cargando=!1,e.$buefy.toast.open("Actualizado correctamente"),e.volver();case 39:case"end":return n.stop()}}),n,null,[[9,28,31,34]])})))()}}},mn=pn,bn=Object(s["a"])(mn,dn,fn,!1,null,null,null),hn=bn.exports,vn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"section"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("img",{staticClass:"image is-centered",attrs:{src:e.Pinto,alt:""}}),t("b-field",{attrs:{label:"Correo"}},[t("b-input",{attrs:{type:"email",placeholder:"tu@correo.aquí",loading:e.cargando},model:{value:e.correo,callback:function(n){e.correo=n},expression:"correo"}})],1),t("b-field",{attrs:{label:"Contraseña"}},[t("b-input",{attrs:{type:"password",placeholder:"Tu contraseña",loading:e.cargando},model:{value:e.palabraSecreta,callback:function(n){e.palabraSecreta=n},expression:"palabraSecreta"}})],1),t("b-button",{staticClass:"is-success",attrs:{loading:e.cargando},on:{click:function(n){return e.iniciarSesion()}}},[e._v("Iniciar sesión")])],1)])])},gn=[],jn=(t("caad"),t("2532"),t("ea7b")),wn={data:function(){return{correo:"",palabraSecreta:"",cargando:!1,Pinto:Re.a}},methods:{iniciarSesion:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.correo&&e.palabraSecreta){n.next=3;break}return e.$buefy.toast.open("Completa los campos"),n.abrupt("return");case 3:if(e.correo.includes("@")){n.next=6;break}return e.$buefy.toast.open("Escribe un correo válido"),n.abrupt("return");case 6:return e.cargando=!0,D.obtener(),t=Object(jn["a"])(),n.prev=9,n.next=12,Object(jn["c"])(t,e.correo,e.palabraSecreta);case 12:e.$buefy.toast.open("Bienvenido"),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](9),e.$buefy.dialog.alert({title:"Error",message:"Error iniciando sesión. Verifica tu correo y contraseña. El error es: "+n.t0.message,type:"is-danger",hasIcon:!0,icon:"alert"});case 18:return n.prev=18,e.cargando=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[9,15,18,21]])})))()}}},Cn=wn,xn=Object(s["a"])(Cn,vn,gn,!1,null,null,null),_n=xn.exports;o["a"].use(y["a"]);var yn=new y["a"]({routes:[{path:"/",name:"Tabs",component:Le},{path:"/apareamientos/:id",name:"Apareamientos",component:on},{path:"/agregar-apareamiento/:id",name:"AgregarApareamiento",component:ln},{path:"/editar-conejo/:id",name:"EditarConejo",component:hn},{path:"/login",name:"Login",component:_n}]});D.obtener(),Object(jn["b"])(Object(jn["a"])(),(function(e){e?yn.push({name:"Tabs"}):"Login"!==yn.currentRoute.name&&yn.push({name:"Login"})})),yn.beforeEach((function(e,n,t){var o=Object(jn["a"])().currentUser;o||"Login"===e.name?t():t({name:"Login"})}));var kn=yn;o["a"].use(d["a"]),o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(l)},router:kn}).$mount("#app")},"85ec":function(e,n,t){},a98c:function(e,n,t){"use strict";t("fe71")},fe71:function(e,n,t){}});